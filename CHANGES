---------------------------------------------------------------------------
[FOR YOUR INFORMATION]

	 MEMO AROUND RECENTLY UPDATED or FIXED;

2000/10/29

  4.0_ALPHA starts

	ftp://ftp.fml.org/pub/fml/current/

2000/10/28

  nuke some libraries in proc/ since these are not maintained long time.

	最近メインテンナスされてない２、３のライブラリを削除
		proc/libftpmail.pl
		proc/libftp.pl
		proc/libhref.pl

  makefml ml-admin.cgi $ml {update,config}


2000/10/15

   make install RECOMMEND=yes
	installs cf.recommneded

	make install RECOMMEND=yes
	もしくは
	env RECOMMEND=yes perl makefml install

	インストール時に推奨設定の cf を準備する。
	＃つまり make secure した時にできる cf の原型

2000/10/14

   fmlwrapper.c (nuke fml.c) and fmlwrapper is used now
	since the names of fml and fml-ctl are ambiguous.

	config.h is removed but now fmlwrapper.h is used.

2000/10/11

   makefml	set umask(022) when &CollectAlaises() runs.

2000/10/10

   mead		a lot of hacks

2000/10/05

   proc/libra.pl
	define "admin add2actives" "admin add2members"

		admin add2actives
		admin add2members
		admin addactives
		admin addmembers

	という片方のファイルにだけ登録する admin コマンド

   proc/libfml.pl
	nuke debug code

	ごめんなさい MAXLEN_COMMAND_INPUT のデバッグコード抜き忘れてました
	current の 20001004 は使わないで下さい。

2000/10/04

   proc/libfml.pl
	define MAXLEN_COMMAND_INPUT
	The maximum length for each command. 128 bytes by default.

   kern/fml
	add mead as a loop check target.
	LoopBackWarn(): check mead@$DOMAINNAME against mail loop

   makefml mead
	set up /var/spool/ml/mead for mead working directory
	
   add "makefml recollect-aliases"
	% cat /var/spool/ml/*/aliases > /var/spool/ml/etc/aliases
	based on "UENO Kazuaki" <kazu@a-u.net> (fml-support: 08834)

	/var/spool/ml/etc/aliases を再生成するコマンド

   var/log/_smtplog.$i
	always log SMTP between fml and MTA to var/log/_smtplog.$i
	where $i is 0 .. 7 (modulo 8).
	This is default configuration now for 4.0 release.
	Configuration:
	$USE_SMTP_LOG_ROTATE toggle flag (defualt 1)
	$NUM_SMTP_LOG_ROTATE modulo, the number of files (default 8)

	つねに _smtplog.数字 のログを残すようにしました。
	でもディスクをくうのでデフォールトは 8 です。

2000/10/01

  mead.pl
	pickup information from smtpfeed -F -1 case

	smtpfeed -1 -F の時のエラーメールから情報を拾いだし
	error_addr.hinsts
	におく。これでフォワードのフォワードの先のエラーを
	追跡する。

  confirmd_master.sh	
	newly added

2000/09/27

   nuke <LIMIT> in .htaccess

2000/09/26

   import Jcode.pm 0.60 to cvs tree

2000/09/24

   fix include-outgoin template permission and other problems
	PR fml-support:8830 by UENO Kazuaki

   bin/daily_master.sh is added

2000/09/23

   makefml resend
	bug fix

   admin get
	controlled under @REMOTE_INACCESSIBLE_FILES

	でもこんな変数名でいいのかなぁ 

2000/09/19

   define IncrementCounter()
   define $USE_SMTP_LOG_ROTATE $NUM_SMTP_LOG_ROTATE


2000/09/12

   fix cf/config which should be read .fml/system if exists
	(PR fml-support: 08636 by Masayuki FUKUI)

   fix NT installer

	Windows 2000/NT でのインストーラの不具合を直す
		エラーをつぶす
		perl path がうまくかわらないのをなおす

2000/09/10

   ADD_FIELD() always convert the args to be capitalized

	ADD_FIELD はどんな引数を与えても常に capital に変更する。
	XXX 変更していいのか？	

	例: ADD_FIELD('x-uja')  は ADD_FIELD('X-Uja') と解釈される。

   libdist.pl
   $USE_SMTPFEED_F_OPTION

	100 回に一回 smtpfeed -F -1 を使う。
	(smtpfeed の設定は各自がんばてください:)

	mead はこのヘッダを見ているが…

   makefml lock extension
	you can use "makefml lock -e script" now.

	makefml lock -e script を実行するとロックをかけつつ
	script を実行する。

2000/09/03

   sbin/makefml   
	define "skip" as an alias of "off" command

	makefml skip コマンドを makefml off と同じ意味にしました


2000/08/25

   sbin/makefml
	fix not to make /var/spool/ml/.crc
	fix flock on solaris2 

2000/08/24

   EnvelopeFilter
	enable EnvelopeFilter to filter Japenese strings.
	define EUCCompare(buf, pat) to check buf with the 2 bytes alignment.

	フィルタルールに日本語をかけるようにする。

2000/08/22

   fix "admin put" removes (^admin|^# admin) lines
	fml-support:8435

2000/08/21
   update virus_check.ph

	reject "filename=.*search.*URL.*\.exe" case

2000/08/20

   define utility functions used in config.ph:
	PERMIT_ADMIN_PROCEDURE()
	DENY_ADMIN_PROCEDURE()
	DEFINE_ADMIN_PROCEDURE()

2000/08/16

  3.0I rename KEYRING_PATH to KEYRING_DIR

	DIST_AUTH_KEYRING_DIR:		$DIR/etc/dist-auth
	DIST_ENCRYPT_KEYRING_DIR:	$DIR/etc/dist-encrypt
	ADMIN_AUTH_KEYRING_DIR:		$DIR/etc/admin-auth
	ADMIN_ENCRYPT_KEYRING_DIR:	$DIR/etc/admin-encrypt

2000/08/12

   3.0I	incompatible changes of authentication method by
		PGP2 PGP5

	PGP 回りの変更をしたために PGP 認証などが非互換になります。

	1. /var/spool/ml/etc/fml/site_force.ph に

		$DIST_ENCRYPT_KEYRING_DIR = $PGP_PATH;
		$ADMIN_AUTH_KEYRING_DIR   = $PGP_PATH;

	   と書くと、3.0H までと同じになります。

	2. もっと後向きな or 危ない解決方法として

		% cd /var/spool/ml/elena/etc
		% ln -s pgp dist-encrypt
		% ln -s pgp admin-auth

	    でも 3.0H までと同じことになります。
	
   "makefml help" show shelp by $ENV{'PAGER'} if defined.

   $PGP_VERSION is removed

2000/08/11

   update doc/Japanese/examples/virus_check.sh
	reject Pretty*Park*exe pattern
	for example "Pretty Park 1.exe" 

   change PGP related codes 
	XXX THIS CHANGE IS INCOMPATIBLE WITH fml 3.0 !!!

2000/08/09

   define new path's to enhance PGP2, PGP5 

	DIST_AUTH_KEYRING_PATH:		$DIR/etc/dist-auth
	DIST_ENCRYPT_KEYRING_PATH:	$DIR/etc/dist-encrypt
	ADMIN_AUTH_KEYRING_PATH:	$DIR/etc/admin-auth
	ADMIN_ENCRYPT_KEYRING_PATH:	$DIR/etc/admin-encrypt

2000/08/06

   messages
	modify search order

	/var/spool/ml/elena/messages.Japanese.conf  (<- newly added)
	/var/spool/ml/elena/messages.conf
	/var/spool/ml/elena/messages/Japanese/$file
	/var/spool/ml/etc/fml/messages/Japanese/$file
	/usr/local/fml/messages/Japanese/$file

2000/08/05

   messages
	modify search order

	エラーメッセージなどのカスタマイズをするファイルの
	サーチ順を変えました。elena MLの場合は

	/var/spool/ml/elena/messages.conf
	/var/spool/ml/elena/messages/Japanese/$file
	/var/spool/ml/etc/fml/messages/Japanese/$file
	/usr/local/fml/messages/Japanese/$file

	$file はいろいろです。kern, auth , ...
	それぞれのファイルの意味は
	
	/usr/local/fml/messages/Japanese/MANIFEST.Japanese
	http://www.fml.org/fml/messages-list.ja.txt

	を見て下さい。デフォールトでは

	/usr/local/fml/messages/Japanese/$file

	にしかファイルはないので、ここのファイルが使われます。

2000/07/29

   check address more severely
	automatic subscribe
	mead.pl

2000/07/28

   add & enable members/actives commands for databases

	ごめん、データベース使う時の members actives コマンド
	書きかけのままだったので、書きました。

2000/07/27

   modify DELETE_FIELD() accepts case-insensitive argument

   nuke MySQL debug code ;)

2000/07/25

   kern/libloadconfig.pl
	define DUMMY,TRUE,FALSE for convenience

2000/07/24

   makefml
	nuke obsolete ConcatenateAliases()

   fix installer to disable installing C/*		

   modify EnvelopeFilter
	EnvelopeFilter should not count up the trailing "\n"
	to determine the number of paragraphs (signature or not).

2000/07/23

  Content Filter bug fix (?)
	appy patch by Naoki IDO (fml-support: 8504)

2000/07/21

  clean up databases
	add PostgreSQL and MySQL example

	PostgreSQL と MySQL のおもちゃモデルの例を追加しました。

2000/07/20

   nuke C/ since it is obsolete. 

   databases/ in distribution (new)
	clean up under this.

   kern/libloadconfig.pl
	apply patch from Naoki IDO (fml-support: 08476)
	resolve undefined bug in $debug on

   3.0H
	enable distribute via recipients list from database

	データベースから引いた配送リストを有効にする
	(3.0G ではデータベースアクセスのみで配送時に有効にはなっていなかった)

   kern/fml.pl databases/ldap/examples/libldap.pl proc/libdatabases.pl
	clarify variable convention between database functions

2000/07/19

   sys/WINDOWS_NT4/makefml.cmd
	enable to boot by hit "makefml" icon 

2000/07/18

   fix CGI profile: fml/sbin/makefml, fml/proc/libmesgle.pl 

	define MesgLE::CacheOn() in libmesgle
	and modify makefml Japanese convertor in html mode which calls
	translators too much !
	makefml in html mode uses this CacheOn() like this
		&MesgLE::CacheOn(*LangExtCache, $msgfile, 'euc');
	If %LangExtCache is non null, convertor uses this cache not look up
	this file. This cache accellerate 3 or 4 times faster conversion.

   check sum to validate relation between cf and config.ph
	(algorithm used by traditional AT&T UNIX)
	sbin/makefml
	bin/cksum.pl

   etc/makefml/Makefile
	use 'makefml update-config'

2000/07/17

   installation
	install makefml not makefml*

   sbin/makefml
	fix to use $^X not "perl" 

   sbin/makefml, cf/config, www/lib/lib*pl, module/*
	fix all perl path within scripts (polite for diag check?)
	from Naoki IDO <ido@hitachi-ms.co.jp> (fml-support: 08471)

2000/07/16

  fix installation on windows 2000 (2000 only???)
	sbin/makefml
		not use pwd but cd
		check USERNAME not $<, $> (this check is valid?)

  fix installation on windows NT4 (NT4 only?)
	sys/WINDOWS_NT4/ntinstall.cmd
		not use fix_syscalls.pl

	sys/WINDOWS_NT4/ntinstall.pl
		clean up installation messages
		nuke debug messages almost anywhere

2000/07/15

  sbin/makefml
  www/lib/libcgi_makefml.pl
	apply patch to fix collection of /var/spool/ml/etc/aliases
	from Naoki IDO <ido@hitachi-ms.co.jp> (fml-support: 08422, 08423)


2000/07/12

  apply patch to fix "makefml config-template" clean up code
	From Naoki IDO <ido@hitachi-ms.co.jp> (fml-support: 08410)

2000/07/09

   kern/fml.pl 
	rename &RunHooks() &RunExitHooks()
	define &RunEndHooks() for symmetric x

   proc/libdist.pl 
	arrange $DISTRIBUTE_START_HOOK and $DISTRIBUTE_END_HOOK in
	the beginning and end of &DoDistribute().
	$DISTRIBUTE_END_HOOK includes $SMTP_CLOSE_HOOK $DISTRIBUTE_CLOSE_HOOK

   MIME functions
	clean up debug codes, add function definitions:
		DecodeMimeStrings()
		DecodeMimeString()
		MimeEncode()
		MimeDecode()
		MIMEEncode()
		MIMEDecode()

2000/07/08

  3.0G  add database access hook
	define initial database access method
	enabel access via LDAP (Leightweight Directory Access Protocol)

  fix cgi-bin/ml-admin/menu.cgi

2000/07/05

  clean up internal for database access
	nuke CheckMember() to replace it with Lookup() or MailList*P()

2000/07/04

  more HOOK's
	add $PROCEDURE_CONFIG_HOOK and $ADMIN_PROCEDURE_CONFIG_HOOK to
	control %Procedure and %AdminProcedure after they are all
	initialized. 

2000/06/30

  bin/archive.sh
	clean up to enable to
	execute archive.pl automatically over all ML's under /var/spool/ml 

2000/06/29

  change the locatoin for message template files
	/usr/local/fml/drafts/Japanese/{help,guide,...}
	/usr/local/fml/drafts/English/{help,guide,...}

	テンプレートファイルの置き場所変えました。
	これで doc/ 以外に .jp シンタックスは消えた	

2000/06/25

  sbin/makefml
	make /usr/local/fml/.fml/system.sh in install
	for shell script

2000/06/20

	nuke sgets(), ipc()

2000/06/19

  sbin/makefml (on Windows NT4)
	fix behaviour around rename()

	config.ph を作り損ねた時のエラーハンドリングの間違いを直す
	＃いわゆる NT の rename(2) まわり問題

  kern/fml.pl
	(back import a fix from 3.0.1_BETA #18)
	disable to reject "From: $MAIL_LIST" mail in default

	3.0-stable と同期してない部分を current へ逆輸入;)

        デフォールトでは From: $MAIL_LIST を弾かないように変更
        3.0ではループチェックの一部としてこれをしているが
        企業のサポートＭＬなどではまるのでとりあえず戻す

	pointed out by MURASHITA Takuya (fml-support: 08220)

2000/06/17

   proc/libmodeutils.pl
   proc/libtagdef.pl 
	apply patch (fml-support: 08232) from HYOUDOH Kouichi <sio-0@rh.to>
	fix the regexp matching against too short string folding for subject

2000/06/16

  3.0F
	internal variable/function name changes (part 2)
	
	内部利用の関数や変数名の naming convention を修正しています(part II)
	もしなんか挙動がおかしいようなら bug-report をお願いします _o_

2000/06/13

  3.0E
	internal variable/function name changes
	
	内部利用の関数や変数名の naming convention を修正しています
	もしなんか挙動がおかしいようなら bug-report をお願いします _o_

2000/06/11

  bin/daily.pl
	if -f pattern_file is not defined, use $EXEC_DIR/etc/daily.ignore

2000/06/09

  CGI	contorable over all menu's

	従来メニューの一部は動かなかった。例えば
	SUBJECT_TAG_TYPE がセキュリティチェックのため動かなかったのを
	動くようにした。

2000/06/08

  EnvelopeFilter
	analyze based on paragraph map (pmap)

2000/06/07

  makefml
	modify initialize process to check $EXEC_DIR more but ...

  etc/makefml/menu.conf
  cf/MANIFEST
	MENU -> SECURITY_AND_FILTER -> PGP_VERSION -> 2 or 5

2000/06/05

  Mesg() Translation M/N ....

	fml の返すメッセージの整理整頓は続くよどこまでも… 
	＃力業はつらし(涙)

2000/06/03

  libpop.pl: change queue file name format

2000/06/02

  enable installer to search pgp5 programs
	See fml/cf/MANIFEST

	XXX PGP5 not yet support "admin pgp5 ... "

2000/06/01

  enhance PGP code to support PGP 2 and 5
  enables makefml {pgpv,pgpk,pgps,pgpe}
	libpgp.pl
	makefml

	まだ prototype (もぉちょっと待って)

	チャレンジャーもとむ！
	PGP 5 でちゃんと使えるかどうかをだれか確認してほしいす

	makefml のコマンドは
		PGP2	pgp
		PGP5	pgpk, pgps, pgpv, pgpe

	で使い分けて下さい。

  rename programs: archive.pl archive.sh with Archive.pl Archive.sh 
	so remove Archive.pl Archive.sh 

2000/05/31

  pgp2 code
	more debug 
	modify function/variable names to be easy for eyes

  doc/
	clean up to clarify apache-ssl and apache+mod_ssl

  messages/
	fix search miss (relation between filename and key)

  messages/English/ 
	create the directory and translates all templates (anyway ;-)

	勢いで全部英訳しました(へろへろ〜）

2000/05/29

  www/examples/postfix/main.cf
	no! use alias_maps not alias_database

2000/05/24

  libarchive.pl: fix function import bug (Thanks Yasuyuki Nakasone)

  add toggle menu for configuration menu on CUI and GUI.
	Please see "makefml config"
	   MAIN_MENU => OPTION => VARIABLE_OFF_ON => ...

	ある変数を off/on のどちらかにする( 1 or 0)くらいは
	全部メニューでできるようにしてみたです。

	   メニュー => OPTION => VARIABLE_OFF_ON => *1 => 変数名リスト => y/n

	*1 画面からはみ出るのをふせぐために変数名をソートして、
	   さらにアルファベット順の前半、後半で分けています。
	   前半は ^A .. ^K, 後半は ^L .. ^Z と画面に説明が出ています

  update INSTALL_on_NT4
	IMail "program aliases" works on NT4

	NT4 での話: IMail Server gold のプログラムエイリアスって 
	program つまり fml を起動してくれるんですね。えらいぞ

2000/05/23

  sbin/makefml 
	define 'tail' as an alises of 'log' command 
	Example:

	makefml elena::tail 

	は tail -10 と同じです

	makefml elena::tail -10

2000/05/22

  sbin/makefml
	clean up 'makefml log' code not to use system commands

2000/05/21

  cf/MANIFEST
	add missing definition
	+FILTER_ATTR_REJECT_NULL_BODY:      	1
	+FILTER_ATTR_REJECT_INVALID_COMMAND:    1
	+FILTER_ATTR_REJECT_ONE_LINE_BODY:     	1

2000/05/12

  sbin/makefml
	clean up (nuke) a lot of debug messages

	うざったいデバッグメッセージ類を一気に整理した
	(すっきりしすぎでしょうか？)

  FNF rewriting project starts ...
	See fml/FNF (in cvs repository)

  more checks on file operations
	define DiagPrograms( @ARRAY ) to check existence of programs and
	validate how command works.
	XXX TODO: file operations
	XXX   need further checks but logs errors in $DIR/log now anyway.

2000/05/11

  sbin/makefml
	disable info in makefml -w (runs on NT) mode

2000/05/10

  doc/Japanese/examples/virus_check.ph is added

	virus check の設定見本例
	(site_force.ph などにつかうといいだろうとおもう)

  bin/spool2html.pl (2.16-2.17):
	mkdir htdocs/ by 0755 explicitly

	spool2html をつかってはじめて htdocs/ をつくると
	700 でディレクトリができてしまうのを 755 に修正

2000/05/09

  kern/fml.pl 
	fml-support: 07764 by OGAWA Kunihiko <kuni@edit.ne.jp>
	fix RuleSetTo() rewriting

  messages/Japanese/confirm (1.1-1.2):
  proc/libconfirm.pl (2.18-2.19):
	add message in manual_subscribe mode which message describes
	how to confirm and subscribe 

	manual subscribe モードでも confirm が返るのだが
	この時は $DIR/confirm が返らない。
	書いてある内容が若干違うのでそのまま使うのには無理がある。

	messages/Japanese/confirm に新しく定義を加え
	短いながらその辺の説明をする文章を返るようにした。

  CGI interface: clean up to be easy for your eyes

2000/05/08

   makefml update ML config.ph : re-create ML's config.ph

	make config.ph と同じ効果をもつ

	% makefml update elena config.ph
		と
	% (cd /var/spool/ml/elena; make config.ph) 

	は同じことをする。ちなみに

	% makefml update-config.ph elena
	% makefml elena::update-config.ph

	はこれの alias である。

   makefml add2actives ML address
   makefml add2members ML address

	片方のファイルだけに(非対象に)登録するためのコマンド
	一応 2 が打ちにくいのでなくてもOKにしてある。

		makefml addactives
		makefml add2actives

	は一緒の意味

		makefml addmembers
		makefml add2members

	は一緒の意味

2000/05/05

   FA2000_003: advisory on Love Letter Worm

2000/05/03

   cf/MANIFEST
	prototype for email-address form should be null for 
	default_config.ph template.

	default_config.ph で $MAIL_LIST, $CONTROL_ADDRESS, $MAINTAINER
	のアドレスの template がNULLになるように設定を変更 	

2000/04/30

   $LOGFILE_SUFFIX	(default NULL)
	$LOGFILE_SUFFIX = ".%C%y";

	log ファイルにsuffixをつけられる。backup が楽
	例: log.2000

	See strftime(3) on the string to be used

   mead 
	clean up a little
	load /var/spool/ml/etc/mead/mead_config.ph if exists
	define $OVERWRITE_COMMAND_LINE_OPTIONS

	もし /var/spool/ml/etc/mead/mead_config.ph があれば
	その設定ファイルをロードする。もし
	$OVERWRITE_COMMAND_LINE_OPTIONS というオプションが
	あれば、mead のコマンドラインオプションよりこのファイルが
	優先される。

   etc/makefml/include-mead
	remove -m $mode

	mead の変更に伴い include-mead 見本ファイルから -m を削除

2000/04/29

   new tutororial documents

2000/04/27

   bump up to 3.0D (_cf changes for command line options)

   clean up campaign (modify global variable name)
   s/_cf/Opt/g over sentences for command line options
	bin/cron.pl
	kern/fml.pl
	kern/msend.pl
	proc/libfml.pl
	bin/split_and_msend.pl

   fix version numbering in sources and packages (fml-stable) 

   new functions used in config.ph (kern/libloadconfig.pl)
	add DEFINE_PROCEDURE()

2000/04/26

   new functions used in config.ph
	PERMIT_PROCEDURE()
	DENY_PROCEDURE()

   anonymous cvs server ready

	anonoymous 用のCVS準備できた。

2000/04/25

   bin/anoncvs is added. It is a wrapper script to access anoncvs.fml.org

	anonymous cvs サーバ用のscript 

2000/04/21

  cut off Re: Re: Re:
	modify regexp to avoid compilation error (related to perl version) 

2000/04/15

  sbin/makefml
	apply patch fml-support: 07762 From: Akira Ohashi
	make template of owner-* for qmail case.

	qmailの時に owner-* のためのtemplateファイルを作る
	(単なる便宜上)

  EnvelopeFilter
	fix paragraph count up method
	fix how to ignore the last paragraph as a signature

	パラグラフ数の数え方、signature部分の無視の仕方を少し変更

  doc/Japanese/

	とりあえずひととおり submit した

2000/04/12

  bin/fwix.pl
	automatically expand ".toc" command to
		"-" x 60
		table of contents
		"-" x 60

	TEXTモードでは .toc を枠つきの自動展開に変更

  doc/Japanese/

	大改造キャンペーン;)

2000/04/11

  bin/fwix.pl
	disable file existence introduced at 2000/04/10

  sbin/makefml (only on NT4)
	fix 'no such file' in "makefml passwd ..."
	by wrap "system stty " with "if $UNISTD"

	NT4 上で『そんなコマンドはない』というエラーメッセージが出る
	のを直す。
	ただし以前からメッセージがでるけどパスワードの変更はできてい
	るという状態のはずなので、無視して使う分には別に問題はない;)

2000/04/10

  bin/fwix.pl
  distrib/mk/fml.turotial.mk
  doc/Japanese/
	rearrange documentation hierarchy. project phase 1 
	enhance bin/fwix.pl also to use X reference cache

	ドキュメント再構成計画 phase 1

	fwix は { label <=> xref } のリファレンスキャッシュと
	それを利用したディレクトリを越えた相互引用を可能にした

2000/04/01

   proc/libconfirm.pl
	define %CONFIRMATION_REPLY_WITH_HELP_P to handle whether we
	should reply help with $CONFIRM_FILE or not See also
	fml-support: 7723

	confirmationのエラーの時にいつでもヘルプファイルを
	つけるのは変なので、それを制御するハッシュテーブルを用意した
	
   modify how to use of $ENV{'PWD'}

2000/03/31

   EnvelopFilter
	skip plural null lines between paragraphs

	最初のＮ行のパラグラフをえぐりだす部分を直す
	FIX: 複数の空行を一行とみなさないとおかしい

---------------------------------------------------------------------------
