DiagPrograms() をうけて、エラー制御をちゃんとしたい

1.  return でOKのところもあるが

2.  for () { &$_fp();} ループでなんらかのエラー判定？

