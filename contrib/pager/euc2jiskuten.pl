#!/usr/local/bin/perl
#
# Copyright (C) 1996-1997 fukachan@sapporo.iij.ad.jp
#
# euc2jiskuten.pl is free software 
# distributed under the terms of the GNU General Public License. 
# see the file COPYING for more details.
#
# $Id$;
#


### MAIN ###
&Init;
&Conv;
exit 0;
### MAIN ENDS ###


sub Init
{
    require 'getopts.pl';
    &Getopts("d");

    $debug = 1 if $opt_d;

    &SetConversionTable;
}


sub Conv
{
    while (sysread(STDIN, $_, 1)) { 

	if ($E2jkHash{$_}) {
	    $buf  = $_;
	    $cord = $E2jkHash{$_};
	    $info = "Hash Hit";
	}
	elsif (ord($_) & 0x80) {
	    sysread(STDIN, $n, 1);	# 2 bytes;

	    if ($cord = $E2jkHash{"$_$n"}) {
		$buf   = "${_}${n}";
		$info  = "(Hash ON 0x80)";
	    }
	    else {
		$cord .= sprintf("%02d", (ord($_) & 0x7f) - 0x20);
		$buf  .= $_;
		$cord .= sprintf("%02d", (ord($n) & 0x7f) - 0x20);
		$buf  .= $n;	    
		$info  = "(ON 0x80)";
	    }
	}
	elsif ($_ eq ' ') {
	    $buf .= $_;
	    $cord = '0101';
	}
	elsif ($_ =~ /^[A-Za-z0-9]+$/) {
	    $buf .= $_;
	    $cord = sprintf("03%02d", ( ord($_) - 0x20) );
	    $info = "(1 byte > 0x20)";
	}
	

	if ($debug) {
	    printf "%-5s   \#%-5s\t%s\n", $buf, $cord, $info if $cord;
	}
	else {
	    print "#$cord" if $cord;
	}

	$buf = $info = $cord = "";  
    }

    print "\n";
}


# Automatically Generated based on egg-jsymbol.el
#          by fukachan@sapporo.iij.ad.jp (1997/03/20)
sub SetConversionTable
{
    %E2jkHash = (
		 ########## by egg-jsymbol.el ########## 
		 '¡¡', '0101',
		 '¡¢', '0102',
		 '¡£', '0103',
		 '¡¤', '0104',
		 '¡¥', '0105',
		 '¡¦', '0106',
		 '¡§', '0107',
		 '¡¨', '0108',
		 '¡©', '0109',
		 '¡ª', '0110',
		 '¡«', '0111',
		 '¡¬', '0112',
		 '¡­', '0113',
		 '¡®', '0114',
		 '¡¯', '0115',
		 '¡°', '0116',
		 '¡±', '0117',
		 '¡²', '0118',
		 '¡³', '0119',
		 '¡´', '0120',
		 '¡µ', '0121',
		 '¡¶', '0122',
		 '¡·', '0123',
		 '¡¸', '0124',
		 '¡¹', '0125',
		 '¡º', '0126',
		 '¡»', '0127',
		 '¡¼', '0128',
		 '¡½', '0129',
		 '¡¾', '0130',
		 '¡¿', '0131',
		 '¡À', '0132',
		 '¡Á', '0133',
		 '¡Â', '0134',
		 '¡Ã', '0135',
		 '¡Ä', '0136',
		 '¡Å', '0137',
		 '¡Æ', '0138',
		 '¡Ç', '0139',
		 '¡È', '0140',
		 '¡É', '0141',
		 '¡Ê', '0142',
		 '¡Ë', '0143',
		 '¡Ì', '0144',
		 '¡Í', '0145',
		 '¡Î', '0146',
		 '¡Ï', '0147',
		 '¡Ð', '0148',
		 '¡Ñ', '0149',
		 '¡Ò', '0150',
		 '¡Ó', '0151',
		 '¡Ô', '0152',
		 '¡Õ', '0153',
		 '¡Ö', '0154',
		 '¡×', '0155',
		 '¡Ø', '0156',
		 '¡Ù', '0157',
		 '¡Ú', '0158',
		 '¡Û', '0159',
		 '¡Ü', '0160',
		 '¡Ý', '0161',
		 '¡Þ', '0162',
		 '¡ß', '0163',
		 '¡à', '0164',
		 '¡á', '0165',
		 '¡â', '0166',
		 '¡ã', '0167',
		 '¡ä', '0168',
		 '¡å', '0169',
		 '¡æ', '0170',
		 '¡ç', '0171',
		 '¡è', '0172',
		 '¡é', '0173',
		 '¡ê', '0174',
		 '¡ë', '0175',
		 '¡ì', '0176',
		 '¡í', '0177',
		 '¡î', '0178',
		 '¡ï', '0179',
		 '¡ð', '0180',
		 '¡ñ', '0181',
		 '¡ò', '0182',
		 '¡ó', '0183',
		 '¡ô', '0184',
		 '¡õ', '0185',
		 '¡ö', '0186',
		 '¡÷', '0187',
		 '¡ø', '0188',
		 '¡ù', '0189',
		 '¡ú', '0190',
		 '¡û', '0191',
		 '¡ü', '0192',
		 '¡ý', '0193',
		 '¡þ', '0194',
		 '¢¡', '0201',
		 '¢¢', '0202',
		 '¢£', '0203',
		 '¢¤', '0204',
		 '¢¥', '0205',
		 '¢¦', '0206',
		 '¢§', '0207',
		 '¢¨', '0208',
		 '¢©', '0209',
		 '¢ª', '0210',
		 '¢«', '0211',
		 '¢¬', '0212',
		 '¢­', '0213',
		 '¢®', '0214',
		 '¢º', '0226',
		 '¢»', '0227',
		 '¢¼', '0228',
		 '¢½', '0229',
		 '¢¾', '0230',
		 '¢¿', '0231',
		 '¢À', '0232',
		 '¢Á', '0233',
		 '¢Ê', '0242',
		 '¢Ë', '0243',
		 '¢Ì', '0244',
		 '¢Í', '0245',
		 '¢Î', '0246',
		 '¢Ï', '0247',
		 '¢Ð', '0248',
		 '¢Ü', '0260',
		 '¢Ý', '0261',
		 '¢Þ', '0262',
		 '¢ß', '0263',
		 '¢à', '0264',
		 '¢á', '0265',
		 '¢â', '0266',
		 '¢ã', '0267',
		 '¢ä', '0268',
		 '¢å', '0269',
		 '¢æ', '0270',
		 '¢ç', '0271',
		 '¢è', '0272',
		 '¢é', '0273',
		 '¢ê', '0274',
		 '¢ò', '0282',
		 '¢ó', '0283',
		 '¢ô', '0284',
		 '¢õ', '0285',
		 '¢ö', '0286',
		 '¢÷', '0287',
		 '¢ø', '0288',
		 '¢ù', '0289',
		 '¢þ', '0294',
		 '£°', '0316',
		 '£±', '0317',
		 '£²', '0318',
		 '£³', '0319',
		 '£´', '0320',
		 '£µ', '0321',
		 '£¶', '0322',
		 '£·', '0323',
		 '£¸', '0324',
		 '£¹', '0325',
		 '£Á', '0333',
		 '£Â', '0334',
		 '£Ã', '0335',
		 '£Ä', '0336',
		 '£Å', '0337',
		 '£Æ', '0338',
		 '£Ç', '0339',
		 '£È', '0340',
		 '£É', '0341',
		 '£Ê', '0342',
		 '£Ë', '0343',
		 '£Ì', '0344',
		 '£Í', '0345',
		 '£Î', '0346',
		 '£Ï', '0347',
		 '£Ð', '0348',
		 '£Ñ', '0349',
		 '£Ò', '0350',
		 '£Ó', '0351',
		 '£Ô', '0352',
		 '£Õ', '0353',
		 '£Ö', '0354',
		 '£×', '0355',
		 '£Ø', '0356',
		 '£Ù', '0357',
		 '£Ú', '0358',
		 '£á', '0365',
		 '£â', '0366',
		 '£ã', '0367',
		 '£ä', '0368',
		 '£å', '0369',
		 '£æ', '0370',
		 '£ç', '0371',
		 '£è', '0372',
		 '£é', '0373',
		 '£ê', '0374',
		 '£ë', '0375',
		 '£ì', '0376',
		 '£í', '0377',
		 '£î', '0378',
		 '£ï', '0379',
		 '£ð', '0380',
		 '£ñ', '0381',
		 '£ò', '0382',
		 '£ó', '0383',
		 '£ô', '0384',
		 '£õ', '0385',
		 '£ö', '0386',
		 '£÷', '0387',
		 '£ø', '0388',
		 '£ù', '0389',
		 '£ú', '0390',
		 '¦¡', '0601',
		 '¦¢', '0602',
		 '¦£', '0603',
		 '¦¤', '0604',
		 '¦¥', '0605',
		 '¦¦', '0606',
		 '¦§', '0607',
		 '¦¨', '0608',
		 '¦©', '0609',
		 '¦ª', '0610',
		 '¦«', '0611',
		 '¦¬', '0612',
		 '¦­', '0613',
		 '¦®', '0614',
		 '¦¯', '0615',
		 '¦°', '0616',
		 '¦±', '0617',
		 '¦²', '0618',
		 '¦³', '0619',
		 '¦´', '0620',
		 '¦µ', '0621',
		 '¦¶', '0622',
		 '¦·', '0623',
		 '¦¸', '0624',
		 '¦Á', '0633',
		 '¦Â', '0634',
		 '¦Ã', '0635',
		 '¦Ä', '0636',
		 '¦Å', '0637',
		 '¦Æ', '0638',
		 '¦Ç', '0639',
		 '¦È', '0640',
		 '¦É', '0641',
		 '¦Ê', '0642',
		 '¦Ë', '0643',
		 '¦Ì', '0644',
		 '¦Í', '0645',
		 '¦Î', '0646',
		 '¦Ï', '0647',
		 '¦Ð', '0648',
		 '¦Ñ', '0649',
		 '¦Ò', '0650',
		 '¦Ó', '0651',
		 '¦Ô', '0652',
		 '¦Õ', '0653',
		 '¦Ö', '0654',
		 '¦×', '0655',
		 '¦Ø', '0656',
		 '§¡', '0701',
		 '§¢', '0702',
		 '§£', '0703',
		 '§¤', '0704',
		 '§¥', '0705',
		 '§¦', '0706',
		 '§§', '0707',
		 '§¨', '0708',
		 '§©', '0709',
		 '§ª', '0710',
		 '§«', '0711',
		 '§¬', '0712',
		 '§­', '0713',
		 '§®', '0714',
		 '§¯', '0715',
		 '§°', '0716',
		 '§±', '0717',
		 '§²', '0718',
		 '§³', '0719',
		 '§´', '0720',
		 '§µ', '0721',
		 '§¶', '0722',
		 '§·', '0723',
		 '§¸', '0724',
		 '§¹', '0725',
		 '§º', '0726',
		 '§»', '0727',
		 '§¼', '0728',
		 '§½', '0729',
		 '§¾', '0730',
		 '§¿', '0731',
		 '§À', '0732',
		 '§Á', '0733',
		 '§Ñ', '0749',
		 '§Ò', '0750',
		 '§Ó', '0751',
		 '§Ô', '0752',
		 '§Õ', '0753',
		 '§Ö', '0754',
		 '§×', '0755',
		 '§Ø', '0756',
		 '§Ù', '0757',
		 '§Ú', '0758',
		 '§Û', '0759',
		 '§Ü', '0760',
		 '§Ý', '0761',
		 '§Þ', '0762',
		 '§ß', '0763',
		 '§à', '0764',
		 '§á', '0765',
		 '§â', '0766',
		 '§ã', '0767',
		 '§ä', '0768',
		 '§å', '0769',
		 '§æ', '0770',
		 '§ç', '0771',
		 '§è', '0772',
		 '§é', '0773',
		 '§ê', '0774',
		 '§ë', '0775',
		 '§ì', '0776',
		 '§í', '0777',
		 '§î', '0778',
		 '§ï', '0779',
		 '§ð', '0780',
		 '§ñ', '0781',
		 '¨¡', '0801',
		 '¨¢', '0802',
		 '¨£', '0803',
		 '¨¤', '0804',
		 '¨¥', '0805',
		 '¨¦', '0806',
		 '¨§', '0807',
		 '¨¨', '0808',
		 '¨©', '0809',
		 '¨ª', '0810',
		 '¨«', '0811',
		 '¨¬', '0812',
		 '¨­', '0813',
		 '¨®', '0814',
		 '¨¯', '0815',
		 '¨°', '0816',
		 '¨±', '0817',
		 '¨²', '0818',
		 '¨³', '0819',
		 '¨´', '0820',
		 '¨µ', '0821',
		 '¨¶', '0822',
		 '¨·', '0823',
		 '¨¸', '0824',
		 '¨¹', '0825',
		 '¨º', '0826',
		 '¨»', '0827',
		 '¨¼', '0828',
		 '¨½', '0829',
		 '¨¾', '0830',
		 '¨¿', '0831',
		 '¨À', '0832',
		 );
}


1;
