#!/usr/local/bin/perl
#
# $Id$;
#

require 'getopts.pl';
&Getopts("d");
$debug = 1 if $opt_d;


&SetConversionTable;

print "\n" if $debug;

while (sysread(STDIN, $_, 1)) { 

    if ($E2jkHash{$_}) {
	$buf  = $_;
	$cord = $E2jkHash{$_};
	$info = "Hash Hit";
    }
    elsif (ord($_) & 0x80) {
	sysread(STDIN, $n, 1);	# 2 bytes;

	if ($cord = $E2jkHash{"$_$n"}) {
	    $buf   = "${_}${n}";
	    $info  = "(Hash ON 0x80)";
	}
	else {
	    $cord .= sprintf("%02d", (ord($_) & 0x7f) - 0x20);
	    $buf  .= $_;
	    $cord .= sprintf("%02d", (ord($n) & 0x7f) - 0x20);
	    $buf  .= $n;	    
	    $info  = "(ON 0x80)";
	}
    }
    elsif ($_ eq ' ') {
	$buf .= $_;
	$cord = '0101';
    }
    elsif ($_ =~ /^[A-Za-z0-9]+$/) {
	$buf .= $_;
	$cord = sprintf("03%02d", ( ord($_) - 0x20) );
	$info = "(1 byte > 0x20)";
    }
    

    if ($debug) {
	printf "%-5s   \#%-5s\t%s\n", $buf, $cord, $info if $cord;
    }
    else {
	print "#$cord" if $cord;
    }

    $buf = $info = $cord = "";  
}

print "\n";


sub SetConversionTable
{
    %E2jkHash = (
		 '¡¡', '0101',
		 '¡¢', '0102',
		 '¡£', '0103',
		 '¡¤', '0104',
		 '¡¥', '0105',
		 '¡¦', '0106',
		 '¡§', '0107',
		 '¡¨', '0108',
		 '¡©', '0109',
		 '¡ª', '0110',
		 '¡«', '0111',
		 '¡¬', '0112',
		 '¡­', '0113',
		 '¡®', '0114',
		 '¡¯', '0115',
		 '¡°', '0116',
		 '¡±', '0117',
		 '¡²', '0118',
		 '¡³', '0119',
		 '¡´', '0120',
		 '¡µ', '0121',
		 '¡¶', '0122',
		 '¡·', '0123',
		 '¡¸', '0124',
		 '¡¹', '0125',
		 '¡º', '0126',
		 '¡»', '0127',
		 '¡¼', '0128',
		 '¡½', '0129',
		 '¡¾', '0130',
		 '¡¿', '0131',
		 '¡À', '0132',
		 '¡Á', '0133',
		 '¡Â', '0134',
		 '¡Ã', '0135',
		 '¡Ä', '0136',
		 '¡Å', '0137',
		 '¡Æ', '0138',
		 '¡Ç', '0139',
		 '¡È', '0140',
		 '¡É', '0141',
		 '¡Ê', '0142',
		 '¡Ë', '0143',
		 '¡Ì', '0144',
		 '¡Í', '0145',
		 '¡Î', '0146',
		 '¡Ï', '0147',
		 '¡Ð', '0148',
		 '¡Ñ', '0149',
		 '¡Ò', '0150',
		 '¡Ó', '0151',
		 '¡Ô', '0152',
		 '¡Õ', '0153',
		 '¡Ö', '0154',
		 '¡×', '0155',
		 '¡Ø', '0156',
		 '¡Ù', '0157',
		 '¡Ú', '0158',
		 '¡Û', '0159',
		 '¡Ü', '0160',
		 '¡Ý', '0161',
		 '¡Þ', '0162',
		 '¡ß', '0163',
		 '¡à', '0164',
		 '¡á', '0165',
		 '¡â', '0166',
		 '¡ã', '0167',
		 '¡ä', '0168',
		 '¡å', '0169',
		 '¡æ', '0170',
		 '¡ç', '0171',
		 '¡è', '0172',
		 '¡é', '0173',
		 '¡ê', '0174',
		 '¡ë', '0175',
		 '¡ì', '0176',
		 '¡í', '0177',
		 '¡î', '0178',
		 '¡ï', '0179',
		 '¡ð', '0180',
		 '¡ñ', '0181',
		 '¡ò', '0182',
		 '¡ó', '0183',
		 '¡ô', '0184',
		 '¡õ', '0185',
		 '¡ö', '0186',
		 '¡÷', '0187',
		 '¡ø', '0188',
		 '¡ù', '0189',
		 '¡ú', '0190',
		 '¡û', '0191',
		 '¡ü', '0192',
		 '¡ý', '0193',
		 '¡þ', '0194',
		 '¢¡', '0201',
		 '¢¢', '0202',
		 '¢£', '0203',
		 '¢¤', '0204',
		 '¢¥', '0205',
		 '¢¦', '0206',
		 '¢§', '0207',
		 '¢¨', '0208',
		 '¢©', '0209',
		 '¢ª', '0210',
		 '¢«', '0211',
		 '¢¬', '0212',
		 '¢­', '0213',
		 '¢®', '0214',
		 '¢¯', '0215',
		 '¢°', '0216',
		 '¢±', '0217',
		 '¢²', '0218',
		 '¢³', '0219',
		 '¢´', '0220',
		 '¢µ', '0221',
		 '¢¶', '0222',
		 '¢·', '0223',
		 '¢¸', '0224',
		 '¢¹', '0225',
		 '¢º', '0226',
		 '¢»', '0227',
		 '¢¼', '0228',
		 '¢½', '0229',
		 '¢¾', '0230',
		 '¢¿', '0231',
		 '¢À', '0232',
		 '¢Á', '0233',
		 '¢Â', '0234',
		 '¢Ã', '0235',
		 '¢Ä', '0236',
		 '¢Å', '0237',
		 '¢Æ', '0238',
		 '¢Ç', '0239',
		 '¢È', '0240',
		 '¢É', '0241',
		 '¢Ê', '0242',
		 '¢Ë', '0243',
		 '¢Ì', '0244',
		 '¢Í', '0245',
		 '¢Î', '0246',
		 '¢Ï', '0247',
		 '¢Ð', '0248',
		 '¢Ñ', '0249',
		 '¢Ò', '0250',
		 '¢Ó', '0251',
		 '¢Ô', '0252',
		 '¢Õ', '0253',
		 '¢Ö', '0254',
		 '¢×', '0255',
		 '¢Ø', '0256',
		 '¢Ù', '0257',
		 '¢Ú', '0258',
		 '¢Û', '0259',
		 '¢Ü', '0260',
		 '¢Ý', '0261',
		 '¢Þ', '0262',
		 '¢ß', '0263',
		 '¢à', '0264',
		 '¢á', '0265',
		 '¢â', '0266',
		 '¢ã', '0267',
		 '¢ä', '0268',
		 '¢å', '0269',
		 '¢æ', '0270',
		 '¢ç', '0271',
		 '¢è', '0272',
		 '¢é', '0273',
		 '¢ê', '0274',
		 '¢ë', '0275',
		 '¢ì', '0276',
		 '¢í', '0277',
		 '¢î', '0278',
		 '¢ï', '0279',
		 '¢ð', '0280',
		 '¢ñ', '0281',
		 '¢ò', '0282',
		 '¢ó', '0283',
		 '¢ô', '0284',
		 '¢õ', '0285',
		 '¢ö', '0286',
		 '¢÷', '0287',
		 '¢ø', '0288',
		 '¢ù', '0289',
		 '¢ú', '0290',
		 '¢û', '0291',
		 '¢ü', '0292',
		 '¢ý', '0293',
		 '¢þ', '0294',
		 );
}


1;
