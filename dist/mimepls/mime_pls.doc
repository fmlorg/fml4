<mime_pls.doc>                                               94/08/30
       《perl library 版 MIME base64 encoder/decoder について》

  MIME base64 encode/decode するための perl library です。メッセージヘ
ッダフィールド中の MIME(part 2) は ISO-2022-JP の base64 encode/decode
のみをサポートします。EUC/SJIS の日本語文字列は ISO-2022-JP への自動変
換を行うことにより MIME(part 2) encode/decode の対象として扱うことがで
きます。body 部の MIME base64 encode/decode は本バージョンからの追加機
能です。
  将来構想としては、Quoted-Printable encoding 機能を追加することと ISO
-2022-JP 以外の文字コードセットを扱えるようにすること、Content-Type ヘ
ッダ等の処理を行うことにより MIME メッセージを完全に扱えるようにするこ
との３つを考えています。
  DOSマシン等の小メモリマシンで使用できるように、mimer.pl と mimew.pl
の２つのライブラリファイルに分割しました。総称名としては mime_pls と名
付けます。（最後の s は複数の意味です。）
  このドキュメント以外に各ファイルの先頭にもドキュメントを付けましたの
で参照してください。

◎再配布について
  このライブラリを利用したアプリケーションを書かれた場合には、このライ
ブラリそのものを添付していただいて構いません。ただし、必ず本ドキュメン
トを含む配布ファイルを全て添付してください。
  改変して再配布する場合はライブラリファイル中の「配布条件」に従ってく
ださい。

◎配布ファイルについて
  ■mime_pls.doc
    このファイルです。

  ■mimer.pl
    require することにより、&mimedecode, &bodydecode, &bdeflush の３つ
  の関数が使用できます。

    ◆&mimedecode($string,$kout)
      $string 中の encoded-word のうち、charset=ISO-2022-JP,encoding=B
    のものを選択的にデコードし、$kout の指定にしたがって漢字コード変換
    を行なった結果を返します。なお、$kout は "SJIS" または "EUC" が有
    効です。$kout に有効な指定がされなかった場合（または省略した場合）
    は ISO-2022-JP（いわゆる7bit JIS）を透過で返します。
      RFC1522に基づき、encoded-word にはさまれたLWS（空白、タブ文字、
    改行＋タブまたは空白）は削除されます。
      デコードしたあと、ISO-2022-JP(RFC1468)で定義されたエスケープシー
    ケンスのうち不必要なものがあれば削除します。

    ◆&bodydecode($encoded)
      $encoded に入れられた文字列を MIME base64 エンコードされたデータ
    とみなしてデコードしその結果を返します。base64 alphabet(A-Za-z0-9+/=)
    以外の文字が存在しても単に無視して処理します。
      デコードは４バイト単位に行われるので、半端な部分（最後の１〜３バ
    イト）はバッファ中に保存され次の呼び出し時にいっしょにデコードされ
    ます。バッファをクリアするには &bdeflush 関数を使用します。

    ◆&bdeflush
      &bodydecode 関数によりバッファに保存されたデータを（最後に適当な
    pad文字'=' を仮定して）デコードしその結果を返します。
      この関数が呼ばれると &bodydecode のバッファがクリアされます。

  ■mimew.pl
    require することにより、&mimeencode, &bodyencode, &benflush の３つ
  の関数が使用できます。

    ◆&mimeencode($string)
      $string 中の漢字の部分を ISO-2022-JP（いわゆる7bit JIS）に変換し
    たあと MIME(part2) エンコードし、その結果を返します。
      漢字コードは同時に Shift-JIS と EUC が含まれる場合を除き（7bit
    JIS と Shift-JIS/EUC の組み合わせなら問題ありません）、自動判断し
    ます。エンコードされる ISO-2022-JP のエスケープシーケンスはライブ
    ラリファイルの最初の方で設定できます。
      $string 中の Shift-JIS または EUC を正常にエンコードするためには、
    英語版の perl を使用するか、または jperl-1.4 を -Llatin オプション
    付きで使用する必要があります。（jperl の 2バイト文字モードでは漢字
    コード変換機能が正常に動きません。:-)）
      encoded-word が ASCII文字や特殊文字と直接接することを避けるため
    に、必要に応じて空白を挿入します。encoded-word がコメントの内側に
    ある場合は例外扱いとして括弧との間に空白を挿入しません。
      長い日本語文字列は必要に応じて分割してエンコードし、また必要に応
    じて encoded-word の前後で折り返し（行分割）処理をします。

    ◆&bodyencode($data)
      $data 中のデータを base64 エンコードしその結果を返します。
      エンコードは出力１行（デフォルトでは72バイト）に相当する単位（デ
    フォルトでは54バイト）毎に処理します。$data のうち半端な部分はバッ
    ファ中に保存され、次の呼び出し時にいっしょにエンコードされます。バ
    ッファをクリアするには &benflush 関数を使用します。
      なお、出力１行の長さはライブラリの最初の方で設定できます。

    ◆&benflush
      &bodyencode 関数によりバッファに保存されたデータをエンコードしそ
    の結果を返します。エンコード結果が４の倍数長にならなければ必要に応
    じて pad文字'=' を追加します。
      この関数が呼ばれると &bodyencode のバッファがクリアされます。

  ■rmime
    mimer.pl を使用して MIME header をデコードするフィルターです。
    使い方：[[j]perl] rmime [ -s | -e | -j ] [ファイル ...]

  ■wmime
    mimew.pl を使用してヘッダフィールド中の日本語文字列を MIME にエン
  コードするフィルターです。
    使い方：[[j]perl [-Llatin]] wmime [ファイル ...]

  ■rbody
    mimer.pl を使用して MIME base64 エンコードされたデータをデコードす
  るフィルターです。MS-DOSマシンでも動作するように作成したので UNIX 等
  では効率が悪いかもしれません。
    使い方：[[j]perl] rbody [ファイル ...]

  ■wbody
    mimew.pl を使用してデータを MIME base64 エンコードするフィルターで
  す。MS-DOSマシンでも動作するように作成したので UNIX 等では効率が悪い
  かもしれません。
    使い方：[[j]perl] wbody [ファイル ...]

  ■Makefile
    mimer.pl mimew.pl rmime wmime rbody wbody をシステムにインストール
  する際に使用します。他には、ppack や tar+gzip(or compress)+uuencode で
  アーカイブを作成することができます。（２つめはほとんど作者専用ですが）

◎無保証
  このプログラムを使用することにより生じた損害については、作者はいかな
る理由においても責任を負いません。使用される方の責任においてお使いくだ
さい。

                                              生田　昇＠市原.千葉.日本
                                              ikuta@crc.co.jp
					      QGB01240@niftyserve.or.jp
                                              net43236@asciinet.or.jp
